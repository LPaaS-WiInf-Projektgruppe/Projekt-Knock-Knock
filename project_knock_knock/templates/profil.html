
{% extends 'flask_user/_public_base.html' %}

{% block extra_css %}
     {{ fontawesome_html() }}
      <link href="{{url_for('static', filename='profil__style.css')}}" rel="stylesheet" type="text/css">
{% endblock %}


{% block header %}


 {% endblock %}

 {% block content %}

<div class="content">


  <div class= "tabs">
   <button id="main-tab" class="tab" onclick="openTab('main-profile- container')">Main Profile</button>
   <button id="work-time-tab" class="tab" onclick="openTab('work-time-container')">Work Time</button>
 </div>

<!-- Main Profile -->

<div id="main-profile-container" class="profile">
  <br>



    <p>Username: {{profile.get_username()}}<p>
    <p>

      {% if profile.get_rating().get_rate_count() > 0 %}
      Rating: {{ profile.get_rating().calculate_average() }}
      {% else %}
      Rating: N/V
      {% endif %}
      ({{ profile.get_rating().get_rate_count() }})
    <p>


      <div class="offer-container">

    <p>You have accepted the following Offers which are still active</p>


    {% if profile.get_accepted_drive_offers() | length == 0 %}
    You currently do not have any accepted active drive offers.
    {% endif %}
    {% for offer in profile.get_accepted_drive_offers() %}
    <div class="offer-container">
      <div class="location-container">
        {{ offer.get_location() }}
      </div>
      <div class="delete-btn" onClick="location.href='/rate_offer/0/{{ offer.get_id()}}'" >x</div>
      <div style="clear:both"></div>
    </div>
    {% endfor %}
    <br>
    {% if profile.get_accepted_com_offers() | length == 0 %}
    You currently do not have any accepted active company offers.
    {% endif %}

    {% for offer in profile.get_accepted_com_offers() %}
    <div class="offer-container">
      <div class="location-container">
        {{ offer.get_start() }} -> {{ offer.get_destination()}} </div>
        <!-- TODO: Change name of button to check as completed -->
      <div class="delete-btn"  onClick="location.href='/rate_offer/1/{{ offer.get_id() }}'" >x</div>
      <div style="clear:both"></div>
    </div>
    {% endfor %}

    </div>

    <br>
    <br>

      <div class="btn" onclick="location.href='/my_offers'">My Offers</div>
      <br><br>
      <div class="btn" onclick="location.href='/my_orders'">My Orders</div>



  </div>


<!-- WORK TIME SETTINGS -->

<div id="work-time-container" class="profile" style="display:none">

  <br>
      <div class="">

    {% for work_time in profile.get_working_times() %}
      <div class="work-times">
        {{ work_time.weekday_to_string_short() }}
        <br>
        {{ work_time.get_start_time() }} bis {{ work_time.get_end_time() }}
        <br>
      </div>
    {% endfor %}
        </div>


</div>


  </div>



<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.2.4/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-sidebar/3.3.2/jquery.sidebar.min.js"></script>

<script type=text/javascript src="{{url_for('static', filename='profil__script.js') }}"></script>




{% endblock %}
